{% extends "encuesta_zara/base.html" %}
{% load static %}

{% block title %}Mis pedidos · ZARA{% endblock %}

{% block content %}
<section class="container my-5" style="max-width:900px;">
  <div class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-3">
    <h2 class="fw-semibold" style="color:var(--mocha);">Mis pedidos</h2>

    <div class="d-flex gap-2">
      <!-- Botón Pasaporte Digital -->
      <a href="/zara-re/pasaporte/" class="btn btn-outline-dark btn-sm" title="Ver pasaporte digital">
        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" class="me-1" viewBox="0 0 16 16">
          <path d="M4.5 2A1.5 1.5 0 0 0 3 3.5v9A1.5 1.5 0 0 0 4.5 14h7A1.5 1.5 0 0 0 13 12.5v-9A1.5 1.5 0 0 0 11.5 2h-7zM4 3.5A.5.5 0 0 1 4.5 3h7a.5.5 0 0 1 .5.5V5H4V3.5zM12 6v6.5a.5.5 0 0 1-.5.5h-7a.5.5 0 0 1-.5-.5V6h8z"/>
        </svg>
        Pasaporte Digital
      </a>

      <!-- Botón Billetera Circular -->
      <button class="btn btn-outline-dark btn-sm" onclick="toggleWallet()" title="Abrir billetera circular">
        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" class="me-1" viewBox="0 0 16 16">
          <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v2h-1a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h1v2a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm15 3h-1a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 .5.5h1V7z"/>
        </svg>
        Billetera Circular
      </button>
    </div>
  </div>

  <div class="alert alert-light border" role="alert">
    Aquí podrás revisar el estado de tus compras recientes. <br>
    <span class="text-muted small">*Esta es una vista demostrativa — conecta tu modelo de pedidos más adelante.</span>
  </div>

  <!-- Pedido ejemplo -->
  <div class="card mb-3 border-0 shadow-sm">
    <div class="card-body">
      <div class="d-flex justify-content-between">
        <div>
          <h6 class="fw-bold mb-1">Pedido #00123</h6>
          <p class="small mb-0 text-muted">Realizado el 10 de noviembre de 2025</p>
        </div>
        <span class="badge bg-success">Entregado</span>
      </div>
      <hr>
      <ul class="list-unstyled small text-muted mb-0">
        <li>2× Chaqueta beige</li>
        <li>1× Blusa lino</li>
      </ul>
      <p class="fw-semibold mt-2 mb-0">$59.990 CLP</p>
    </div>
  </div>

  <!-- Otro pedido de ejemplo -->
  <div class="card mb-3 border-0 shadow-sm">
    <div class="card-body">
      <div class="d-flex justify-content-between">
        <div>
          <h6 class="fw-bold mb-1">Pedido #00122</h6>
          <p class="small mb-0 text-muted">Realizado el 2 de noviembre de 2025</p>
        </div>
        <span class="badge bg-warning text-dark">En tránsito</span>
      </div>
      <hr>
      <ul class="list-unstyled small text-muted mb-0">
        <li>1× Pantalón lino beige</li>
        <li>1× Blazer Mocha</li>
      </ul>
      <p class="fw-semibold mt-2 mb-0">$79.980 CLP</p>
    </div>
  </div>
</section>

<!-- ============================= -->
<!-- MODAL: Billetera Circular -->
<!-- ============================= -->
<div id="walletModal" class="wallet-overlay" style="display:none;">
  <div class="wallet-content card shadow-lg p-4 text-center" style="max-width:420px;margin:auto;border-radius:16px;">
    <h5 class="fw-semibold mb-2" style="color:var(--mocha);">Billetera Circular</h5>
    <p class="text-muted small mb-3">Saldo acumulado por prendas devueltas o recicladas:</p>
    <h2 style="color:var(--tendril);font-weight:700;">$4.800 CLP</h2>
    <p class="small text-muted mb-4">Equivalente a 2 prendas recicladas</p>

    <div class="text-start border-top pt-3 mt-3 small">
      <p class="mb-1 fw-semibold">Últimos movimientos</p>
      <ul class="list-unstyled mb-3" style="line-height:1.6;">
        <li>+ $2.400 — Devolución “Trench liviano” (11/11/25)</li>
        <li>+ $2.400 — Reciclaje “Blazer Mocha” (08/11/25)</li>
      </ul>
    </div>

    <button class="btn btn-primary rounded-pill px-4" onclick="toggleWallet()">Cerrar</button>
  </div>
</div>

<style>
  .wallet-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.55);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 99;
    backdrop-filter: blur(3px);
  }
</style>

<script>
  function toggleWallet(){
    const modal = document.getElementById("walletModal");
    modal.style.display = modal.style.display === "none" ? "flex" : "none";
  }
</script>
{% endblock %}
