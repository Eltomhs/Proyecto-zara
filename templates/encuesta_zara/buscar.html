{% extends "encuesta_zara/base.html" %}
{% load static %}

{% block title %}ZARA · Resultados de búsqueda{% endblock %}

{% block content %}
<div class="container my-5">

  <h2 class="fw-bold mb-4" style="color:var(--mocha);">
    Resultados para: <span class="text-dark">"{{ query }}"</span>
  </h2>

  {% if results %}
    <p class="text-muted mb-4">{{ results|length }} productos encontrados</p>

    <div class="row g-4">
      {% for p in results %}
      <div class="col-6 col-md-4 col-lg-3">
        <article class="product-card h-100 d-flex flex-column">

          <!-- Imagen -->
          <a href="{% url 'zara:producto_detalle' p.slug %}" class="d-block">
            <div class="product-media">
              <img src="{% static p.img %}" alt="{{ p.nombre }}">
            </div>
          </a>

          <div class="product-info flex-grow-1">
            <h5 class="product-title">{{ p.nombre }}</h5>
            <p class="product-price">${{ p.precio|floatformat:0 }} CLP</p>

            <button class="btn btn-add w-100 mt-2"
              data-add='{"slug":"{{ p.slug }}","nombre":"{{ p.nombre }}","precio":{{ p.precio }}}'
              {% if p.has_sizes %}data-sizes="yes"{% endif %}>
              Añadir
            </button>
          </div>
        </article>
      </div>
      {% endfor %}
    </div>

  {% else %}
    <div class="text-center py-5">
      <h4 class="fw-semibold mb-2" style="color:var(--mocha);">No encontramos resultados</h4>
      <p class="text-muted">Intenta buscar otro producto o revisa las categorías.</p>
      <a href="{% url 'zara:home' %}" class="btn btn-outline-secondary mt-3">Volver al inicio</a>
    </div>
  {% endif %}

</div>
{% endblock %}